<div class="dg-content-page dg-page-priceslote">
  <div class="dg-head-back">
    <span>
      <i class="fa fa-angle-left"></i>
    </span>
  </div>
  <div class="dg-content-bartitle dg-bartitle-2"
       *ngIf="producto">
    <div class="row">
      <div class="col-sm-3 col-xs-3 col-md-3 col-lg-3">
        <div class="dg-content-icon">
          <span>
            <i class="fa fa-flag"></i>
          </span>
        </div>
      </div>
      <div class="col-sm-9 col-xs-9 col-md-9 col-lg-9">
        <div class="dg-content-info">
          <div class="dg-row-text1">
            {{producto.nombre}}
          </div>
          <div class="dg-row-text2">
            <div *ngFor="let valor of producto.valoresCampos">
              <div *ngIf="valor.nombre && valor.nombre === 'M2'">
                {{valor.valor}} <span>m2</span>
              </div>
            </div>
          </div>
          <div class="dg-row-text3">
          </div>
        </div>
      </div>
    </div>
  </div><!-- dg-content-bartitle -->

  <div class="dg-content-infoclient">
    <div class="dg-content-button"
         *ngIf="!clientId && producto && producto.estatus.toString()==='DISPONIBLE'">
      <button class="btn btn-app"
              routerLink="/clientes"
              [queryParams]="{returnTo: '/adquirir', productoId: productoId}">
        <i class="fa fa-users"></i>
        Asignar cliente...
      </button>
    </div>

    <div *ngIf="client">
      <div class="dg-info-client">
        <div class="row">
          <div class="col-xs-5 col-sm-5 col-md-5 col-lg-5">
            <label>
              Nombre:
            </label>
          </div>
          <div class="col-xs-7 col-sm-7 col-md-7 col-lg-7">
        <span>
          {{ client.nombre }}
        </span>
          </div>
        </div>

        <div class="row">
          <div class="col-xs-5 col-sm-5 col-md-5 col-lg-5">
            <label>
              Dirección:
            </label>
          </div>
          <div class="col-xs-7 col-sm-7 col-md-7 col-lg-7">
        <span>
          {{ client.direccion }}
        </span>
          </div>
        </div>

        <div class="row">
          <div class="col-xs-5 col-sm-5 col-md-5 col-lg-5">
            <label>
              Teléfono:
            </label>
          </div>
          <div class="col-xs-7 col-sm-7 col-md-7 col-lg-7">
        <span>
          {{ client.telefono }}
        </span>
          </div>
        </div>

        <div class="row">
          <div class="col-xs-5 col-sm-5 col-md-5 col-lg-5">
            <label>
              Correo:
            </label>
          </div>
          <div class="col-xs-7 col-sm-7 col-md-7 col-lg-7">
            <span>
              {{ client.email }}
            </span>
          </div>
        </div>

        <div class="row" *ngIf="producto && producto.estatus.toString()==='DISPONIBLE'">
          <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
            <button class="btn btn-app dg-btn-changeclient"
                    routerLink="/clientes"
                    [queryParams]="{returnTo: '/adquirir', productoId: productoId}">
              <i class="fa fa-exchange"></i>
              Cambiar cliente...
            </button>
          </div>
        </div>
      </div><!-- end - dg-info-client -->
    </div><!-- end - dg-content-infoclient -->

  </div><!-- end - dg-content-infoclient -->

  <div class="dg-content-buttons">
    <div class="dg-content-lineprice">
      <div>
      <span>
      </span>
        <span *ngIf="producto">
        {{producto.precio | currency:'MXN'}}
      </span>
      </div>
    </div><!-- end - .dg-content-lineprice -->

    <div *ngIf="client">
      <div class="dg-content-btnlink">
      <span>
        <button data-target="#modal-block"
                data-toggle="modal"
                class="dg-text-link" >
          Bloquear
        </button>
      </span>
      </div>
      <div class="dg-content-btns">
        <div class="dg-content-button">
          <button (click)="setAsideProperty()"
                  class="dg-btn dg-btn-orange">
            Apartar
          </button>
          <button (click)="toSellProperty()"
                  class="dg-btn dg-btn-green">
            Vender
          </button>
        </div>
      </div>
    </div>

  </div><!-- end - dg-content-buttons -->

</div><!-- end - dg-page-priceslote -->

<!-- Modal - Bloquear  -->
<div *ngIf="producto && client && producto.estatus.toString() === 'DISPONIBLE'"
     class="modal fade"
     id="modal-block" >
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title">Bloqueo de producto</h4>
      </div>
      <div class="modal-body">
        <p>
          Estás a punto de bloquear el producto
          <strong>
            {{producto.id}} - {{producto.nombre}}
          </strong>
          para el cliente
          <label>
            {{client.nombre}} {{client.apellidos}}
          </label>
        </p>
        <p>
          Es necesario establecer el número de días:
          <input type="number"
                 placeholder="Min: 1 - Max: 5"
                 min="1"
                 max="5"
                 maxlength="1"
                 [(ngModel)]="diasApartado" />
        </p>
      </div>
      <div class="modal-footer">
        <button type="button"
                class="btn btn-default pull-left"
                data-dismiss="modal">
          Cancelar
        </button>
        <button [disabled]="!(diasApartado > 0 && diasApartado < 6)"
                type="button"
                class="btn btn-primary"
                (click)="blockProperty('BLOQUEAR')"
                data-dismiss="modal">
          Aceptar
        </button>
      </div>
    </div>
    <!-- /.modal-content -->
  </div>
  <!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<!-- Modal - Apartar  -->
<div *ngIf="producto && client && (producto.estatus.toString() === 'DISPONIBLE' || producto.estatus.toString() === 'BLOQUEADO')"
     class="modal fade"
     id="modal-apartar" >
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title">
          Apartado de producto
        </h4>
      </div>
      <div class="modal-body">
        <p>
          Estás a punto de apartar el producto
          <strong>
            {{producto.id}} - {{producto.nombre}}
          </strong>
          para el cliente
          <label>
            {{client.nombre}} {{client.apellidos}}
          </label>
        </p>
        <p>
          Es necesario definir el monto de apartado:
          <input type="number"
                 placeholder="$00,000.00"
                 maxlength="9"
                 [(ngModel)]="montoApartado" />
        </p>
      </div>
      <div class="modal-footer">
        <button type="button"
                class="btn btn-default pull-left"
                data-dismiss="modal">
          Cancelar
        </button>
        <button [disabled]="!(montoApartado > 10000)"
                type="button"
                class="btn btn-primary"
                (click)="blockProperty('APARTAR')"
                data-dismiss="modal">
          Aceptar
        </button>
      </div>
    </div>
    <!-- /.modal-content -->
  </div>
  <!-- /.modal-dialog -->
</div>
<!-- /.modal -->
